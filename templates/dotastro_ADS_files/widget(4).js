define(["js/widgets/query_info/query_info_widget","js/widgets/base/base_widget","hbs!js/wraps/abstract_page_library_add/template"],function(e,t,i){return e.extend({abstractPage:!0,initialize:function(e){e=e||{},this.model=new this.modelConstructor,this.view=new this.viewConstructor({model:this.model,template:i}),t.prototype.initialize.call(this,e)},activate:function(e){this.setBeeHive(e),_.bindAll(this);var t=this,i=this.getPubSub();if(i.subscribe(i.LIBRARY_CHANGE,this.processLibraryInfo),i.subscribe(i.USER_ANNOUNCEMENT,this.handleUserAnnouncement),i.subscribe(i.DISPLAY_DOCUMENTS,this.onDisplayDocuments),this.getBeeHive().getObject("User").isLoggedIn()){this.model.set("loggedIn",!0);this.getBeeHive().getObject("LibraryController").getLibraryMetadata().done(function(e){t.processLibraryInfo(e)})}},onDisplayDocuments:function(e){var t=this.parseIdentifierFromQuery(e);"null"!==t&&(this._bibcode=t)}})});