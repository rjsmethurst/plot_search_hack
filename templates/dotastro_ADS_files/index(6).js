function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}define(["underscore","js/components/api_targets","../actions/index","js/widgets/config","redux"],function(e,t,r,o,a){var n=r.SET_QUERY,s=r.SET_FORMAT,c=r.SET_FORMATS,i=r.SET_CUSTOM_FORMAT,u=r.SET_PROGRESS,p=r.SET_COUNT,S=r.SET_PAGE,b=r.SET_IGNORE,_=r.SET_HAS_ERROR,d=r.SET_SHOW_CLOSER,l=r.SET_ERROR_MSG,j=r.SET_MAX_COUNT,g=r.SET_TOTAL_RECS,E=r.SET_BATCH_SIZE,f=r.REQUEST_IDS,T=r.RECEIVE_IDS,y=r.REQUEST_EXPORT,h=r.RECEIVE_EXPORT,m=r.REQUEST_FAILED,O=r.REQUEST_CANCELLED,R=r.TAKE_SNAPSHOT,A=r.SET_ORIGIN,x=r.SET_SORT,v=r.RESET,F=r.HARD_RESET,C=r.SET_CUSTOM_FORMATS,w=r.SET_BIBTEX_MAX_AUTHORS,B=r.SET_BIBTEX_KEY_FORMAT,P=r.SET_BIBTEX_ABS_MAX_AUTHORS,M=r.SET_BIBTEX_ABS_KEY_FORMAT,I=r.SET_BIBTEX_AUTHOR_CUTOFF,U=r.SET_BIBTEX_ABS_AUTHOR_CUTOFF,X=r.SET_BIBTEX_JOURNAL_FORMAT,K=e.map(o.export.formats,function(t,r){return e.extend(t,{id:String(r)})}),D=a.combineReducers({format:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{label:"BibTeX",value:"bibtex",id:"0"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return t.format;default:return e}},formats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return t.formats;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hasError:!1,errorMsg:"Sorry, something happened during the request. Please try again"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return _objectSpread(_objectSpread({},e),{},{hasError:t.hasError});case l:return _objectSpread(_objectSpread({},e),{},{errorMsg:t.errorMsg});default:return e}},exports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,output:"",progress:0,ids:[],sort:"date desc, bibcode desc",count:0,page:0,maxCount:t._limits.ExportWidget.default,batchSize:t._limits.ExportWidget.default,ignore:!1,totalRecs:0,customFormatString:"",customFormats:[],snapshot:{},bibtexKeyFormat:null,bibtexMaxAuthors:0,bibtexAuthorCutoff:200,bibtexABSKeyFormat:null,bibtexABSMaxAuthors:0,bibtexABSAuthorCutoff:200,bibtexJournalFormat:1},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case f:return _objectSpread(_objectSpread({},e),{},{isFetching:!0,progress:0});case T:return _objectSpread(_objectSpread({},e),{},{isFetching:!1,progress:100,ids:r.ids});case g:return _objectSpread(_objectSpread({},e),{},{totalRecs:r.totalRecs});case y:return _objectSpread(_objectSpread({},e),{},{isFetching:!0,progress:0});case i:return _objectSpread(_objectSpread({},e),{},{customFormatString:r.format});case C:return _objectSpread(_objectSpread({},e),{},{customFormats:r.customFormats});case w:return _objectSpread(_objectSpread({},e),{},{bibtexMaxAuthors:r.maxAuthors});case B:return _objectSpread(_objectSpread({},e),{},{bibtexKeyFormat:r.keyFormat});case I:return _objectSpread(_objectSpread({},e),{},{bibtexAuthorCutoff:r.payload});case P:return _objectSpread(_objectSpread({},e),{},{bibtexABSMaxAuthors:r.maxAuthors});case M:return _objectSpread(_objectSpread({},e),{},{bibtexABSKeyFormat:r.keyFormat});case U:return _objectSpread(_objectSpread({},e),{},{bibtexABSAuthorCutoff:r.payload});case X:return _objectSpread(_objectSpread({},e),{},{bibtexJournalFormat:r.payload});case h:return _objectSpread(_objectSpread({},e),{},{isFetching:!1,progress:100,output:r.exports,ignore:!1});case m:return _objectSpread(_objectSpread({},e),{},{isFetching:!1,progress:0});case O:return _objectSpread(_objectSpread({},e),{},{ignore:!0,isFetching:!1,progress:0,output:""});case b:return _objectSpread(_objectSpread({},e),{},{ignore:r.ignore});case u:return _objectSpread(_objectSpread({},e),{},{progress:r.progress});case E:return _objectSpread(_objectSpread({},e),{},{batchSize:r.batchSize});case p:return _objectSpread(_objectSpread({},e),{},{count:r.count>e.maxCount?e.maxCount:r.count});case j:return _objectSpread(_objectSpread({},e),{},{maxCount:r.maxCount>e.totalRecs?e.totalRecs:r.maxCount});case S:return _objectSpread(_objectSpread({},e),{},{page:r.page});case x:return _objectSpread(_objectSpread({},e),{},{sort:r.sort});case R:return _objectSpread(_objectSpread({},e),{},{snapshot:r.snapshot});case v:return _objectSpread(_objectSpread({},e.snapshot),{},{output:"",snapshot:e.snapshot});default:return e}},main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{query:{},showCloser:!0,showSlider:!0,origin:"results-page",showReset:!0,splitCols:!0,autoSubmit:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return _objectSpread(_objectSpread({},e),{},{showCloser:t.showCloser});case n:return _objectSpread(_objectSpread({},e),{},{query:t.query});case A:return _objectSpread(_objectSpread({},e),{},{showCloser:"results-page"===t.origin,showSlider:"results-page"===t.origin,splitCols:"results-page"===t.origin,showReset:"results-page"===t.origin,autoSubmit:"results-page"!==t.origin,origin:t.origin});default:return e}}});return function(e,t){return t.type===F&&(e=void 0),D(e,t)}});