define(["js/widgets/export/widget.jsx","js/components/api_query","js/components/json_response"],function(e,t,i){return e.extend({initialize:function(t){this.on("page-manager-message",function(e,t){"broadcast-payload"===e&&this.ingestBroadcastedPayload(t)}),e.prototype.initialize.call(this,t)},activate:function(t){this.setBeeHive(t),_.bindAll(this,"setCurrentQuery","processResponse");var i=this.getPubSub();i.subscribe(i.DELIVERING_RESPONSE,this.processResponse),e.prototype.activate.call(this,t)},ingestBroadcastedPayload:function(e){e&&(this.bibcode=e)},setSubView:function(e){this.bibcode&&e&&this.renderWidgetForListOfBibcodes([this.bibcode],{format:e})}})});