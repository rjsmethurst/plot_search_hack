define(["react","prop-types","react-redux","../actions"],function(e,t,n,r){var a=n.useSelector,o=n.useDispatch,i=r.getRecommendations,s=r.emitAnalytics,u=function(t){var n=t.title,r=t.bibcode,a=t.author,o=t.totalAuthors,i=t.onClick,s=e.useRef(null);return e.useEffect(function(){return s.current&&s.current.addEventListener("click",i),function(){s.current&&s.current.removeEventListener("click",i)}},[]),e.createElement("li",{style:{marginTop:"1rem"}},e.createElement("a",{href:"#/abs/".concat(r,"/abstract"),ref:s},n),e.createElement("ul",{className:"list-inline"},a.map(function(t,n){return e.createElement("li",{key:t},"".concat(t).concat(n<2?";":""))}),o>3&&e.createElement("li",null,"...")))};u.defaultProps={title:"",bibcode:"",author:[],totalAuthors:0,onClick:function(){}},u.propTypes={title:t.string,bibcode:t.string,author:t.arrayOf(t.string),totalAuthors:t.number,onClick:t.func};var c=function(t){var n=t.children;return e.createElement("div",{style:{display:"flex",justifyContent:"center",padding:"2rem 0"}},n)};c.propTypes={children:t.element.isRequired};var l=0,d=null,m=!1,f=function(e){return e.userName!==d&&(l=0,d=e.userName,m=!1),{getRecommendationsRequest:e.requests.GET_RECOMMENDATIONS,getDocsRequest:e.requests.GET_DOCS,docs:e.docs,queryParams:e.queryParams,executed:l,reported:m}};return function(){var t=o(),n=a(f),r=n.getRecommendationsRequest,d=n.getDocsRequest,h=n.docs,g=n.queryParams;n.userName;e.useEffect(function(){l+432e5<Date.now()?(l=Date.now(),t(i()),m=!1):l&&0===h.length&&!m&&(t(s(["send","event","interaction.no-recommendation","no-useful-recommendations","",0])),m=!0)});return"pending"===r.status||"pending"===d.status?e.createElement(c,null,e.createElement("span",null,e.createElement("i",{className:"fa fa-spinner fa-spin","aria-hidden":"true"})," ","Loading...")):"failure"===r.status||"failure"===d.status?e.createElement(c,null,e.createElement("span",null,e.createElement("i",{className:"fa fa-exclamation-triangle text-danger","aria-hidden":"true"})," ",r.error||d.error)):0===h.length?e.createElement(c,null,"Sorry, we do not have any recommendations for you just yet! ADS provides users recommendations based on their reading history, and we suggest that you create an ADS account to take advantage of this feature. If you already have an account, then be sure you are logged in while searching and reading papers. In due time we will be able to provide you with suggestions based on your inferred interests."):e.createElement("div",null,e.createElement("ul",{className:"list-unstyled"},h.map(function(n,r){var a=n.title,o=n.bibcode,i=n.author,c=n.totalAuthors;return e.createElement(u,{key:o,title:a,bibcode:o,author:i,totalAuthors:c,onClick:function(){return function(e,n){var r=e.bibcode;t(s(["send","event","interaction.recommendation",g.function,r,n]))}(h[r],r)}})})))}});